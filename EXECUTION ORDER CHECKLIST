ğŸ”’ SYSTEM OF PROOF â€” EXECUTION ORDER CHECKLIST

(START â†’ FINISH, NO DUMMY DATA, NO REWORK)

PHASE 0 â€” HARD LOCKS (DO THIS FIRST, ONCE)

â˜ Confirm NO demo mode
â˜ Confirm NO seed data
â˜ Confirm NO deletes allowed (DB + Prisma middleware)
â˜ Confirm Employees â‰  Users
â˜ Confirm Evidence + Ledger are append-only

ğŸš« If any of these are not true, STOP.

PHASE 1 â€” DATA FOUNDATION (YOU START HERE)
1.1 Database

â˜ Provision PostgreSQL
â˜ Enable uuid-ossp extension
â˜ Lock DB roles (no DELETE on evidence tables)

1.2 Prisma

â˜ Add schema.prisma (the one we defined)
â˜ Run migrations in order
â˜ Verify all tables are EMPTY

âœ”ï¸ Gate: SELECT COUNT(*) = 0 for all core tables

PHASE 2 â€” CORE INFRASTRUCTURE (NON-UI)
2.1 Evidence + Ledger

â˜ Implement writeEvidenceNode()
â˜ Implement appendLedgerEntry()
â˜ Enforce: every POST/PATCH â†’ evidence + ledger

2.2 Enforcement Core

â˜ Certification enforcement service
â˜ Block logic (fail closed)
â˜ EnforcementAction logging

ğŸš« No UI yet. No exceptions.

PHASE 3 â€” QR CERTIFICATION VERIFICATION (CRITICAL PATH)
3.1 Backend

â˜ Certification issuance API
â˜ QR token generation (hashed)
â˜ Public /api/verify/:token endpoint
â˜ VerificationEvent + ledger write on scan

3.2 Rules

â˜ QR always resolves (even expired/revoked)
â˜ QR never mutates certification
â˜ Every scan = evidence

âœ”ï¸ Gate: Scan QR â†’ see status â†’ ledger entry exists

PHASE 4 â€” BACKGROUND JOBS & CRON (AUTOMATION)
4.1 Required Jobs

â˜ Certification expiration job (daily)
â˜ JHA enforcement sweep (30 min)
â˜ Fatigue risk job (2 hr)
â˜ AI near-miss clustering (nightly)
â˜ Audit readiness scoring (nightly)

4.2 Rules

â˜ Jobs do NOT create records
â˜ Jobs only derive / flag / block
â˜ Jobs write evidence

âœ”ï¸ Gate: Expired cert auto-blocks work next day

PHASE 5 â€” API LAYER (CONTRACT COMPLETE)

â˜ Implement all API routes exactly as defined
â˜ Enforce org scope middleware
â˜ Enforce role middleware
â˜ Enforce public-only QR verification

ğŸš« No UI assumptions here.

PHASE 6 â€” NEXT.JS APP ROUTER STRUCTURE

â˜ Create app/(platform) routes
â˜ Create app/(public)/verify/[token]
â˜ Create app/(regulator) scope
â˜ Server-only services in /lib/services

âœ”ï¸ Gate: Platform boots with no data rendered

PHASE 7 â€” DESIGN SYSTEM â†’ CODE (DO NOT SKIP)
7.1 Figma

â˜ Apply spacing tokens (4px scale)
â˜ Auto-layout on ALL components
â˜ Status colors semantic + locked

7.2 Tailwind

â˜ Apply locked tailwind.config.ts
â˜ Ban arbitrary spacing
â˜ Map tokens 1:1 with Figma

ğŸš« If design â‰  Tailwind, design is wrong.

PHASE 8 â€” CORE UI BUILD (ORDER MATTERS)
8.1 Start With THESE SCREENS ONLY

â˜ Employee Directory
â˜ Employee Profile (Certs + QR)
â˜ Public QR Verification Page
â˜ Audit Vault (read-only)

âœ”ï¸ Gate:

Cert uploaded â†’ QR visible

QR scan â†’ evidence appears

Audit timeline shows scan

PHASE 9 â€” ROLE-BASED UI FLOWS
Build in This Order

â˜ Admin
â˜ Safety
â˜ Dispatch
â˜ Supervisor
â˜ Executive
â˜ Regulator (last)

ğŸš« Do NOT mix roles.

PHASE 10 â€” AI SURFACING (ADVISORY ONLY)

â˜ AI insights generated server-side
â˜ AI labeled â€œAdvisoryâ€ in UI
â˜ AI linked to evidence IDs
â˜ AI never blocks actions directly

âœ”ï¸ Gate: AI off â†’ system still safe

PHASE 11 â€” QA & DEFENSIBILITY CHECK

â˜ No record editable after creation
â˜ No deletes possible
â˜ Every action traceable
â˜ QR scans logged
â˜ Expired cert blocks work
â˜ Regulator sees read-only data

PHASE 12 â€” MVP READY DEFINITION

You are MVP-ready when:

âœ… Real employee added
âœ… Real cert uploaded
âœ… QR scanned in field
âœ… Cert expires â†’ work blocked
âœ… Audit timeline shows proof
âœ… Zero dummy data anywhere

ğŸš¨ WHAT NOT TO DO (COMMON FAILURE POINTS)

âŒ Donâ€™t start with UI
âŒ Donâ€™t seed example data
âŒ Donâ€™t let employees log in
âŒ Donâ€™t allow manual overrides
âŒ Donâ€™t soften enforcement â€œfor nowâ€

FINAL CONFIRMATION

This checklist is:

Complete

Ordered

Dependency-safe

Audit-defensible

If you follow it top to bottom, you will not have to redo anything later.
